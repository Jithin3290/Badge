import {useState,useRef} from "react"
function Todo() {
    const [item,setItem] = useState([])
    const [check,setCheck] = useState(null)
    const [ value,setValue] = useState()
    const r = useRef()
    const d = useRef()

    function handle1(){
        const data = r.current.value
        setItem([...item,data])
        r.current.value =""
    }
    function handle2(i){
        const newArr  = [...item]
        newArr.splice(i,1)
        setItem(newArr)
    }
    function handle3(i) {
        setCheck(i)
    }
    function handle4(i) {
        const newArr = [...item]
        newArr[i] = value
        setItem(newArr)
        setCheck(null)
    }
    function handle5(i) {
        const color = item.filter((color,index)=>{
            return index == i
        })
        d.current.style.backgroundColor  = color
    }
    return( 
        <div style = {{backgroundColor:"aliceblue",padding:10}}>
            <br/>
                <h1>Todo List</h1>
        items : <input type = "text" ref = {r} style={{border:"1px solid black",borderRadius:10}}/>
            <button onClick = {handle1} style={{border:"1px solid red",borderRadius:10}}>Add</button>
            {item.map((data,i)=>{
            return(<li key = {i} stye={{padding:10}} onClick={()=>handle5(i)}>{i}:{data}<button onClick = {()=>handle2(i)} style={{border:"1px solid red",borderRadius:10,marginLeft:40}}>remove</button>
                      <button onClick = {()=>handle3(i)} style={{border:"1px solid red",borderRadius:10,marginLeft:20}}>edit</button>
                      {check == i && 
            <>
            <input type = "text" onChange = {(e)=>setValue(e.target.value)}/><button onClick = {()=>handle4(i)}>save</button>
            </>
            }
                      </li>)
            })}
        <div style={{height:150,width:150,backgroundColor:"white",}}ref = {d}>color</div>
        </div>
    )
}
export default Todo
