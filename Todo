import React, { useState,useRef } from "react";
import "./style.css";

export default function App() {
  const [data, setData] = useState();
  const [list, setList] = useState([]);
  const [edit,setEdit] = useState(null)
  const [search,setSearch] = useState([])
  const dataRef = useRef()
  function handleAdd(){
    const value = dataRef.current.value
    setList([...list,value])
    dataRef.current.value = ""
  }
  function handleDelete(i){
    const newArr = [...list]
    newArr.splice(i,1)
    setList(newArr)
  }
  function handleEdit(i){
    setEdit(i)
  }
  function handleSave(i){
    const newArray = [...list]
    newArray.splice(i,1,data)
    setList(newArray)
    setEdit(null)
  }
  function handleSearch(e){
    const s = e.target.value
    const newArr = list.filter(item=>{
      return item === s
    })
    setSearch(newArr)
    }
  return (
    <div><>
      <h1>TODO</h1>
      <input type = "text" ref = {dataRef}/><button onClick = {handleAdd}>Add</button>
      <br/><input type = "text" placeholder="search" onChange={(e)=>handleSearch(e)}/>

      {list.map((item,i)=>{
        return (<><li key={i}>{item}
        <button onClick={()=>handleDelete(i)}> delete</button>
        <button onClick={()=>handleEdit(i)}> edit</button>
        {edit==i && <><input type="text" onChange={(e)=>setData(e.target.value)}/><button
         onClick={()=>handleSave(i)}>save</button></>}
        </li></>)
      })}
      <h3>searched item</h3>
      {search.map((item,i)=>{
        return(<li key={i}>{item}</li>)
      })}
      </>
    </div>
  );
}
